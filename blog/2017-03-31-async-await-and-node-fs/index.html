<!doctype html>
<html class="no-js" lang="">
  <head>
      <meta charset="utf-8">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      <title>Async/Await and Node FS</title>
      <meta name="description" content="">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <style type="text/css">a,html{color:#302d3b}html{line-height:20px;font-family:"Open Sans",sans-serif;font-size:14px;font-weight:300}@media screen and (min-width:768px){html{line-height:26px;font-size:17px}}body{margin:0}body *{box-sizing:border-box}a{transition:all .3s;text-decoration:none}strong{font-weight:700}.only__desktop{display:none}@media screen and (min-width:768px){.only__desktop{display:block}}.heading{text-transform:uppercase;line-height:30px;font-family:"Montserrat",sans-serif;font-size:24px}@media screen and (min-width:768px){.heading{line-height:50px;font-size:42px}}.heading-medium{margin:0;line-height:20px;font-size:14px}@media screen and (min-width:768px){.heading-medium{line-height:30px;font-size:24px}}.heading-small{margin:0;line-height:26px;font-size:17px}@media screen and (min-width:1024px){.heading-small{line-height:30px;font-size:24px}}.button{display:inline-block;transition:background .3s;margin:0 15px;border:1px solid #302d3b;border-radius:30px;background:rgba(234,198,14,.7);padding:15px 30px;width:200px;text-transform:uppercase;line-height:20px;color:#302d3b;font-size:14px;font-weight:700}.button:hover{background:#eac60e}.social{display:flex;align-items:center;justify-content:center;margin:45px 0;padding:0;list-style:none}.social li{margin:0 15px}.social__link{display:inline-block;position:relative;transition:background .3s;border-radius:50%;background:#302d3b;width:36px;height:36px}.social__icon{position:absolute;width:22px;height:22px;fill:#fff}.social__icon-github{top:7px;left:6px}.social__icon-twitter{top:7px;left:7px}.social__icon-linkedin{top:6px;left:8px}.title{padding-top:50px;text-align:center}.title::after{position:fixed;top:0;right:0;left:0;z-index:-1;background:linear-gradient(to bottom,rgba(255,255,255,.9) 0%,#fff 100%),url(/dist/images/blogbg.jpg) no-repeat center center;background-size:cover;width:100vw;height:100vh;content:''}.title__category{text-transform:uppercase;font-size:14px}.title__heading h1{margin:20px auto;padding:0 20px;max-width:465px}.title__author{opacity:.4;margin:30px 0 10px}.title__logo{margin-bottom:40px;width:75px;height:30px;fill:#302d3b}.divider,.title__logo .logo__dot{fill:#eac60e}.divider{display:block;margin:30px auto 40px;width:40px;height:20px}.previews{margin:0 auto 60px;max-width:780px}.preview{display:flex;border-bottom:1px solid rgba(48,45,59,.05);padding:0 20px 30px}.preview:last-of-type{border-bottom:0}@media screen and (min-width:1024px){.preview{padding:30px 0}}.preview__date{display:flex;flex-direction:column;align-items:center;justify-content:center;opacity:.3;padding-right:20px;width:150px;text-align:center;text-transform:uppercase;font-family:"Montserrat",sans-serif;font-size:42px}.preview__date span{line-height:26px;font-size:17px}.preview__link{color:#302d3b}.preview__link h2{transition:color .3s}.preview__link:hover h2{color:#eac60e}.preview__text{margin:0}.article{margin:0 auto 60px;padding:0 20px;max-width:780px}.article h2{margin-top:40px;text-transform:uppercase;line-height:20px;font-family:"Montserrat",sans-serif;font-size:14px}@media screen and (min-width:768px){.article h2{line-height:30px;font-size:24px}}.article p::after{display:table;clear:both;content:''}.article img.left{padding:20px 0;width:100%;height:auto}@media screen and (min-width:768px){.article img.left{float:left;padding:0 20px 20px 0;width:auto;max-height:300px}}.article img.right{padding:20px 0;width:100%;height:auto}@media screen and (min-width:768px){.article img.right{float:right;padding:0 0 20px 20px;width:auto;max-height:300px}}.article code{color:#e0004b;font-family:'Consolas',monospace}.article pre{margin:20px 0;max-width:100%;overflow:scroll}.article a{display:inline-block;background:rgba(234,198,14,.4);padding:0 5px}.article a:hover{background:rgba(234,198,14,.7)}@media screen and (min-width:768px){.article{padding:0}}.article__comments{margin-top:40px}.footer{display:flex;position:relative;flex-direction:column;align-items:center;justify-content:center;border-top:1px solid rgba(48,45,59,.05);padding:0 20px 100px;text-align:center}.footer a:hover{color:#eac60e}.footer-inverse{border:0;color:#fff}.footer-inverse::after{position:absolute;top:0;bottom:20px;left:20px;z-index:1;background-color:#302d3b;width:calc(100% - 40px);height:calc(100% - 20px);content:''}.footer-inverse a{color:#fff}@media screen and (min-width:376px){.footer{padding-bottom:20px}}.footer__list{display:flex;flex-direction:column;margin:0;padding:0;list-style:none;text-transform:uppercase;line-height:20px;font-size:14px;font-weight:700}.footer__list li{display:inline;padding:0 25px}@media screen and (min-width:768px){.footer__list{flex-direction:row}.footer__list li{margin-bottom:0}}.footer__content{position:relative;z-index:4;padding:45px 0}.footer__copyright{margin-bottom:0}.footer__subline{opacity:.6;margin:0;line-height:20px;font-size:14px}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:0 0;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style>
      <link rel="canonical" href="https://robbg.io" />
  </head>  <body>
    <header class="title">
      <a href="/">
        <svg viewBox="0 0 115 50" class="title__logo"><path class="logo__dot" d="M105.9 44.8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9s1.5.3 2.1.9c.6.6.9 1.3.9 2.1s-.3 1.6-.9 2.1c-.6.6-1.3.9-2.1.9s-1.5-.3-2.1-.9c-.6-.6-.9-1.3-.9-2.1z"/><path class="logo__initials" d="M106 25.4c.1.9.1 1.8.1 2.7 0 5.5-1.9 10.1-5.8 13.9-3.8 3.8-8.5 5.7-13.9 5.7-5.5 0-10.1-1.9-14-5.8-3.8-3.8-5.8-8.5-5.8-14 0-5.4 1.9-10.1 5.8-13.9 3.8-3.8 8.5-5.8 14-5.8 3.9 0 7.6 1.1 10.9 3.2 3.2 2.1 5.5 4.9 7.1 8.4h-6c-2.9-4.2-6.9-6.3-12-6.3-4 0-7.4 1.4-10.2 4.2-2.8 2.8-4.2 6.2-4.2 10.1 0 4 1.4 7.4 4.2 10.2 2.8 2.8 6.2 4.2 10.2 4.2 3.5 0 6.5-1.1 9.2-3.3 2.7-2.2 4.3-5 4.9-8.4h-14v-5.3H106zM25.6 3.1h5.3v11.4c3.9-4.1 8.7-6.2 14.3-6.2 5.5 0 10.1 1.9 14 5.8C63 18 64.9 22.6 64.9 28c0 5.5-1.9 10.1-5.8 14-3.8 3.8-8.5 5.8-14 5.8-5.4 0-10.1-1.9-13.9-5.8-3.8-3.8-5.8-8.5-5.8-14V3.1zm9.5 14.8c-2.8 2.8-4.2 6.2-4.2 10.1 0 4 1.4 7.4 4.2 10.2 2.8 2.8 6.2 4.2 10.1 4.2 4 0 7.4-1.4 10.2-4.2S59.6 32 59.6 28c0-3.9-1.4-7.3-4.2-10.1-2.8-2.8-6.2-4.2-10.2-4.2-3.9 0-7.3 1.4-10.1 4.2zM4.2 28.4c0-5.4 1.9-10.1 5.8-13.9 3.8-3.9 8.5-5.8 13.9-5.8v5.4c-3.9 0-7.3 1.4-10.1 4.2-2.8 2.8-4.2 6.2-4.2 10.2v19.3H4.2V28.4z"/></svg>
      </a>
      <div class="title__category">Javascript </div>
      <div class="title__heading">
        <h1 class="heading">Async/Await and Node FS</h1>
      </div>
      <div class="title__author">by Rob Byrne-Graham on 31st March 2017</div>
      <svg viewBox="0 0 40 10" class="divider"><g><circle cx="5" cy="5" r="5"/><circle cx="20" cy="5" r="5"/><circle cx="35" cy="5" r="5"/></g></svg>
    </header>

    <article class="article">
        <p>Sometimes, when in a hurry, or have pressure to deliver on a development task, it’s necessary to take shortcuts. You try and avoid doing it, and you try and make a note to go back in and re-factor in the future, but nevertheless, you end up shipping code which you’re not that proud of.</p>
<p>I did exactly that whilst building this blog. Ok, I wasn’t exactly under much pressure, I could have released this when I wanted - but I was writing this on a busy Saturday and I wanted to get it done quickly rather than spend too much of my weekend on it.</p>
<p>This blog is produced using a very simple static site generator node application. It’s written specifically for this blog and is barely over a 100 lines long. In short, it works by cycling through a folder of markdown files that contain the content for each blog post, binding that content to a handlebars template and writing the resultant static HTML to file.</p>
<p>The function that I initially wrote to write to file looked like this…</p>
<pre><code class="lang-javascript">const writeToFile = (template, data, path) =&gt; {
  const HTML = renderTemplate(template, data); // Render template
  mkpath.sync(path); // Make sure path exists
  fs.writeFileSync(`${path}/index.html`, HTML, { encoding: &#39;utf8&#39; }); // Write to file
};
</code></pre>
<p>The eagle eyed reader of that function will see exactly where a shortcut was taken. Instead of taking advantage of the asynchronous nature of node’s inbuilt file system plugin, I cheated, and used the sync version. I did this because async can be hard and I didn’t want to get caught up in a callback nightmare - so writing the code synchronously was just quicker to write, even though I knew it would be slower to execute.</p>
<p>Knowing I had taken that shortcut bothered me, however, and I’ve since re-written the application (including that function) to take advantage of the new async/await syntax that became natively available in <a href="https://nodejs.org/en/blog/release/v7.6.0/">Node v7.6.0</a>.</p>
<p>So, how did that go?</p>
<h2 id="step-1">Step 1</h2>
<p>The first step in the process was to wrap the required node file system API methods inside a promise so that they would be useable alongside async/ await. This is because the async file system API currently use a callback. A promisified node filesystem API method would then look like this...</p>
<pre><code class="lang-javascript">const readFile = filePath =&gt; new Promise((resolve, reject) =&gt; {
  fs.readFile(filePath, (err, data) =&gt; {
    if (err) reject(err);
    else resolve(data);
  });
});
</code></pre>
<p>Fortunately, I didn&#39;t actually have to write that for every fs method I required. This is because, like with most problems I usually face when working with Javascript, there are usually smart people out there who have already done it before! I chose a library called <a href="https://github.com/Holixus/nano-fs">nano-fs by Vladimir Antonov</a>, as it include in some extended functionality, such as a method to write a file path if it doesn’t already exist.</p>
<h2 id="step-2">Step 2</h2>
<p>With the native FS API replaced by <code>nano-fs</code>, it meant I could re-write that write to file function as...</p>
<pre><code class="lang-javascript">const fs = require(‘nano-fs’);

const writeToFile = async (template, data, filePath) =&gt; {
  const HTML = await renderTemplate(template, data); // Render template
  await fs.mkpath(filePath); // Make sure path exists
  return fs.writeFile(`${filePath}/index.html`, HTML, { encoding: &#39;utf8&#39; }); // Write to file
};
</code></pre>
<p>It&#39;s this that is so useful about the async/await syntax. I had written an asynchronous version of the same function, in exactly the same amount of lines as I did synchronously. No callbacks in sight! Why didn&#39;t I just do that from the beginning?</p>
<h2 id="step-3">Step 3</h2>
<p>Those eagle eyed of you that caught me out before might also have noticed that I&#39;m also now returning the final <code>fs.writeFile()</code> promise from the function, rather than simply calling it. This means that whilst executing the static site generator, I am now able to combine all the asynchronous write to file calls needed for all the seperate posts into an array and use <code>Promise.all()</code> to execute them all simultaneously for a much quicker build process! I won&#39;t repeat all the code for that here, but those interested can look at the final static site app <a href="https://github.com/robertbg/robertbg.github.io/blob/master/compile.js">here</a>.</p>
<p>It&#39;s not perfect, and it&#39;s been built for a particular usecase (this blog) rather than with any intention to release to the already crowded static-site-generator marketplace, but for 115 lines of code and less than an hour of my time, it does the job pretty well. A job that&#39;s now done asynchronously!</p>



    </article>

    <footer class="footer">
        <div class="footer__content">
        <ul class="footer__list">
            <li><a href="/#about">About</a></li>
            <li><a href="/#labs">Projects</a></li>
            <li><a href="/#contact">Contact</a></li>
            <li><a href="/blog">Blog</a></li>
        </ul>
        <p class="footer__copyright">&copy; 2018 RBG Digital Ltd.</p>
        <p class="footer__subline">Company Number: 9390203</p>
        </div>
    </footer>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:900|Open+Sans:300,700" rel="stylesheet">

    <script>var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var e=/\blang(?:uage)?-(\w+)\b/i,a=0,t=_self.Prism={manual:_self.Prism&&_self.Prism.manual,util:{encode:function(e){return e instanceof n?new n(e.type,t.util.encode(e.content),e.alias):"Array"===t.util.type(e)?e.map(t.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++a}),e.__id},clone:function(e){switch(t.util.type(e)){case"Object":var a={};for(var n in e)e.hasOwnProperty(n)&&(a[n]=t.util.clone(e[n]));return a;case"Array":return e.map&&e.map(function(e){return t.util.clone(e)})}return e}},languages:{extend:function(e,a){var n=t.util.clone(t.languages[e]);for(var r in a)n[r]=a[r];return n},insertBefore:function(e,a,n,r){var i=(r=r||t.languages)[e];if(2==arguments.length){n=arguments[1];for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i}var l={};for(var o in i)if(i.hasOwnProperty(o)){if(o==a)for(var s in n)n.hasOwnProperty(s)&&(l[s]=n[s]);l[o]=i[o]}return t.languages.DFS(t.languages,function(a,t){t===r[e]&&a!=e&&(this[a]=l)}),r[e]=l},DFS:function(e,a,n,r){r=r||{};for(var i in e)e.hasOwnProperty(i)&&(a.call(e,i,e[i],n||i),"Object"!==t.util.type(e[i])||r[t.util.objId(e[i])]?"Array"!==t.util.type(e[i])||r[t.util.objId(e[i])]||(r[t.util.objId(e[i])]=!0,t.languages.DFS(e[i],a,i,r)):(r[t.util.objId(e[i])]=!0,t.languages.DFS(e[i],a,null,r)))}},plugins:{},highlightAll:function(e,a){var n={callback:a,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};t.hooks.run("before-highlightall",n);for(var r,i=n.elements||document.querySelectorAll(n.selector),s=0;r=i[s++];)t.highlightElement(r,!0===e,n.callback)},highlightElement:function(a,n,r){for(var i,s,l=a;l&&!e.test(l.className);)l=l.parentNode;l&&(i=(l.className.match(e)||[,""])[1].toLowerCase(),s=t.languages[i]),a.className=a.className.replace(e,"").replace(/\s+/g," ")+" language-"+i,l=a.parentNode,/pre/i.test(l.nodeName)&&(l.className=l.className.replace(e,"").replace(/\s+/g," ")+" language-"+i);var o={element:a,language:i,grammar:s,code:a.textContent};if(t.hooks.run("before-sanity-check",o),!o.code||!o.grammar)return o.code&&(o.element.textContent=o.code),void t.hooks.run("complete",o);if(t.hooks.run("before-highlight",o),n&&_self.Worker){var u=new Worker(t.filename);u.onmessage=function(e){o.highlightedCode=e.data,t.hooks.run("before-insert",o),o.element.innerHTML=o.highlightedCode,r&&r.call(o.element),t.hooks.run("after-highlight",o),t.hooks.run("complete",o)},u.postMessage(JSON.stringify({language:o.language,code:o.code,immediateClose:!0}))}else o.highlightedCode=t.highlight(o.code,o.grammar,o.language),t.hooks.run("before-insert",o),o.element.innerHTML=o.highlightedCode,r&&r.call(a),t.hooks.run("after-highlight",o),t.hooks.run("complete",o)},highlight:function(e,a,r){var i=t.tokenize(e,a);return n.stringify(t.util.encode(i),r)},tokenize:function(e,a){var n=t.Token,r=[e],i=a.rest;if(i){for(var s in i)a[s]=i[s];delete a.rest}e:for(var s in a)if(a.hasOwnProperty(s)&&a[s]){var l=a[s];l="Array"===t.util.type(l)?l:[l];for(var o=0;o<l.length;++o){var u=l[o],g=u.inside,c=!!u.lookbehind,d=!!u.greedy,p=0,m=u.alias;if(d&&!u.pattern.global){var h=u.pattern.toString().match(/[imuy]*$/)[0];u.pattern=RegExp(u.pattern.source,h+"g")}u=u.pattern||u;for(var f=0,b=0;f<r.length;b+=r[f].length,++f){var k=r[f];if(r.length>e.length)break e;if(!(k instanceof n)){u.lastIndex=0;var y=u.exec(k),w=1;if(!y&&d&&f!=r.length-1){if(u.lastIndex=b,!(y=u.exec(e)))break;for(var v=y.index+(c?y[1].length:0),P=y.index+y[0].length,_=f,x=b,j=r.length;j>_&&P>x;++_)x+=r[_].length,v>=x&&(++f,b=x);if(r[f]instanceof n||r[_-1].greedy)continue;w=_-f,k=e.slice(b,x),y.index-=b}if(y){c&&(p=y[1].length);var P=(v=y.index+p)+(y=y[0].slice(p)).length,$=k.slice(0,v),A=k.slice(P),S=[f,w];$&&S.push($);var W=new n(s,g?t.tokenize(y,g):y,m,y,d);S.push(W),A&&S.push(A),Array.prototype.splice.apply(r,S)}}}}}return r},hooks:{all:{},add:function(e,a){var n=t.hooks.all;n[e]=n[e]||[],n[e].push(a)},run:function(e,a){var n=t.hooks.all[e];if(n&&n.length)for(var r,i=0;r=n[i++];)r(a)}}},n=t.Token=function(e,a,t,n,r){this.type=e,this.content=a,this.alias=t,this.length=0|(n||"").length,this.greedy=!!r};if(n.stringify=function(e,a,r){if("string"==typeof e)return e;if("Array"===t.util.type(e))return e.map(function(t){return n.stringify(t,a,e)}).join("");var i={type:e.type,content:n.stringify(e.content,a,r),tag:"span",classes:["token",e.type],attributes:{},language:a,parent:r};if("comment"==i.type&&(i.attributes.spellcheck="true"),e.alias){var s="Array"===t.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(i.classes,s)}t.hooks.run("wrap",i);var l=Object.keys(i.attributes).map(function(e){return e+'="'+(i.attributes[e]||"").replace(/"/g,"&quot;")+'"'}).join(" ");return"<"+i.tag+' class="'+i.classes.join(" ")+'"'+(l?" "+l:"")+">"+i.content+"</"+i.tag+">"},!_self.document)return _self.addEventListener?(_self.addEventListener("message",function(e){var a=JSON.parse(e.data),n=a.language,r=a.code,i=a.immediateClose;_self.postMessage(t.highlight(r,t.languages[n],n)),i&&_self.close()},!1),_self.Prism):_self.Prism;var r=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return r&&(t.filename=r.src,!document.addEventListener||t.manual||r.hasAttribute("data-manual")||("loading"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(t.highlightAll):window.setTimeout(t.highlightAll,16):document.addEventListener("DOMContentLoaded",t.highlightAll))),_self.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism),Prism.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/i,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},Prism.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),Prism.languages.xml=Prism.languages.markup,Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:{pattern:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,greedy:!0},property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},Prism.languages.css.atrule.inside.rest=Prism.util.clone(Prism.languages.css),Prism.languages.markup&&(Prism.languages.insertBefore("markup","tag",{style:{pattern:/(<style[\w\W]*?>)[\w\W]*?(?=<\/style>)/i,lookbehind:!0,inside:Prism.languages.css,alias:"language-css"}}),Prism.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:Prism.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:Prism.languages.css}},alias:"language-css"}},Prism.languages.markup.tag)),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:{pattern:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*\*?|\/|~|\^|%|\.{3}/}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}}),Prism.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\\\|\\?[^\\])*?`/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\w\W]*?>)[\w\W]*?(?=<\/script>)/i,lookbehind:!0,inside:Prism.languages.javascript,alias:"language-javascript"}}),Prism.languages.js=Prism.languages.javascript,function(e){var a=/\{\{\{[\w\W]+?\}\}\}|\{\{[\w\W]+?\}\}/g;e.languages.handlebars=e.languages.extend("markup",{handlebars:{pattern:a,inside:{delimiter:{pattern:/^\{\{\{?|\}\}\}?$/i,alias:"punctuation"},string:/(["'])(\\?.)*?\1/,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee][+-]?\d+)?)\b/,boolean:/\b(true|false)\b/,block:{pattern:/^(\s*~?\s*)[#\/]\S+?(?=\s*~?\s*$|\s)/i,lookbehind:!0,alias:"keyword"},brackets:{pattern:/\[[^\]]+\]/,inside:{punctuation:/\[|\]/,variable:/[\w\W]+/}},punctuation:/[!"#%&'()*+,.\/;<=>@\[\\\]^`{|}~]/,variable:/[^!"#%&'()*+,.\/;<=>@\[\\\]^`{|}~\s]+/}}}),e.languages.insertBefore("handlebars","tag",{"handlebars-comment":{pattern:/\{\{![\w\W]*?\}\}/,alias:["handlebars","comment"]}}),e.hooks.add("before-highlight",function(e){"handlebars"===e.language&&(e.tokenStack=[],e.backupCode=e.code,e.code=e.code.replace(a,function(a){return e.tokenStack.push(a),"___HANDLEBARS"+e.tokenStack.length+"___"}))}),e.hooks.add("before-insert",function(e){"handlebars"===e.language&&(e.code=e.backupCode,delete e.backupCode)}),e.hooks.add("after-highlight",function(a){if("handlebars"===a.language){for(var t,n=0;t=a.tokenStack[n];n++)a.highlightedCode=a.highlightedCode.replace("___HANDLEBARS"+(n+1)+"___",e.highlight(t,a.grammar,"handlebars").replace(/\$/g,"$$$$"));a.element.innerHTML=a.highlightedCode}})}(Prism),Prism.languages.markdown=Prism.languages.extend("markup",{}),Prism.languages.insertBefore("markdown","prolog",{blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},code:[{pattern:/^(?: {4}|\t).+/m,alias:"keyword"},{pattern:/``.+?``|`[^`\n]+`/,alias:"keyword"}],title:[{pattern:/\w+.*(?:\r?\n|\r)(?:==+|--+)/,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#+.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])([\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:/(^|[^\\])(\*\*|__)(?:(?:\r?\n|\r)(?!\r?\n|\r)|.)+?\2/,lookbehind:!0,inside:{punctuation:/^\*\*|^__|\*\*$|__$/}},italic:{pattern:/(^|[^\\])([*_])(?:(?:\r?\n|\r)(?!\r?\n|\r)|.)+?\2/,lookbehind:!0,inside:{punctuation:/^[*_]|[*_]$/}},url:{pattern:/!?\[[^\]]+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)| ?\[[^\]\n]*\])/,inside:{variable:{pattern:/(!?\[)[^\]]+(?=\]$)/,lookbehind:!0},string:{pattern:/"(?:\\.|[^"\\])*"(?=\)$)/}}}}),Prism.languages.markdown.bold.inside.url=Prism.util.clone(Prism.languages.markdown.url),Prism.languages.markdown.italic.inside.url=Prism.util.clone(Prism.languages.markdown.url),Prism.languages.markdown.bold.inside.italic=Prism.util.clone(Prism.languages.markdown.italic),Prism.languages.markdown.italic.inside.bold=Prism.util.clone(Prism.languages.markdown.bold),function(e){var a=e.util.clone(e.languages.javascript);e.languages.jsx=e.languages.extend("markup",a),e.languages.jsx.tag.pattern=/<\/?[\w\.:-]+\s*(?:\s+(?:[\w\.:-]+(?:=(?:("|')(\\?[\w\W])*?\1|[^\s'">=]+|(\{[\w\W]*?\})))?|\{\.{3}\w+\})\s*)*\/?>/i,e.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,e.languages.insertBefore("inside","attr-name",{spread:{pattern:/\{\.{3}\w+\}/,inside:{punctuation:/\{|\}|\./,"attr-value":/\w+/}}},e.languages.jsx.tag);var t=e.util.clone(e.languages.jsx);delete t.punctuation,t=e.languages.insertBefore("jsx","operator",{punctuation:/=(?={)|[{}[\];(),.:]/},{jsx:t}),e.languages.insertBefore("inside","attr-value",{script:{pattern:/=(\{(?:\{[^}]*\}|[^}])+\})/i,inside:t,alias:"language-javascript"}},e.languages.jsx.tag)}(Prism),function(e){e.languages.sass=e.languages.extend("css",{comment:{pattern:/^([ \t]*)\/[\/*].*(?:(?:\r?\n|\r)\1[ \t]+.+)*/m,lookbehind:!0}}),e.languages.insertBefore("sass","atrule",{"atrule-line":{pattern:/^(?:[ \t]*)[@+=].+/m,inside:{atrule:/(?:@[\w-]+|[+=])/m}}}),delete e.languages.sass.atrule;var a=/((\$[-_\w]+)|(#\{\$[-_\w]+\}))/i,t=[/[+*\/%]|[=!]=|<=?|>=?|\b(?:and|or|not)\b/,{pattern:/(\s+)-(?=\s)/,lookbehind:!0}];e.languages.insertBefore("sass","property",{"variable-line":{pattern:/^[ \t]*\$.+/m,inside:{punctuation:/:/,variable:a,operator:t}},"property-line":{pattern:/^[ \t]*(?:[^:\s]+ *:.*|:[^:\s]+.*)/m,inside:{property:[/[^:\s]+(?=\s*:)/,{pattern:/(:)[^:\s]+/,lookbehind:!0}],punctuation:/:/,variable:a,operator:t,important:e.languages.sass.important}}}),delete e.languages.sass.property,delete e.languages.sass.important,delete e.languages.sass.selector,e.languages.insertBefore("sass","punctuation",{selector:{pattern:/([ \t]*)\S(?:,?[^,\r\n]+)*(?:,(?:\r?\n|\r)\1[ \t]+\S(?:,?[^,\r\n]+)*)*/,lookbehind:!0}})}(Prism);</script>

  </body>
</html>
